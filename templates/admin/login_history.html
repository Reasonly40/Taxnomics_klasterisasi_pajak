{% extends "layout.html" %}

{% block title %}History Login User - TaxNomics{% endblock %}

{% block content %}
<div class="card bg-base-100 shadow-xl">
    <div class="card-body">
        <h1 class="card-title text-2xl text-primary">History Login User</h1>

        <form method="get" class="card-actions items-center gap-4 p-4 bg-base-200 rounded-lg">
            <div class="form-control">
                <label class="label">
                    <span class="label-text">Tanggal Mulai</span>
                </label>
                <input type="date" name="start_date" value="{{ start_date }}" class="input input-bordered input-sm">
            </div>
            <div class="form-control">
                <label class="label">
                    <span class="label-text">Tanggal Akhir</span>
                </label>
                <input type="date" name="end_date" value="{{ end_date }}" class="input input-bordered input-sm">
            </div>
            <div class="pt-6">
                <button type="submit" class="btn btn-primary btn-sm">Filter</button>
            </div>
        </form>

        <div class="overflow-x-auto mt-4">
            <table class="table table-zebra w-full">
                <thead>
                    <tr>
                        <th>User</th>
                        <th>IP Address</th>
                        <th>Waktu Login</th>
                    </tr>
                </thead>
                <tbody>
                    {% for log in logs.items %}
                    <tr class="hover">
                        <td>{{ log.username }}</td>
                        <td>{{ log.ip_address }}</td>
                        <td>{{ log.login_time_str }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="3" class="text-center text-base-content/60 py-4">Tidak ada data untuk rentang tanggal yang dipilih.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="card-actions justify-center mt-6">
            <div class="join">
                {% if logs.has_prev %}
                <a href="?page={{ logs.prev_num }}&start_date={{ start_date }}&end_date={{ end_date }}" class="join-item btn">«</a>
                {% else %}
                <button class="join-item btn btn-disabled">«</button>
                {% endif %}
                
                <button class="join-item btn">Halaman {{ logs.page }} dari {{ logs.pages }}</button>
                
                {% if logs.has_next %}
                <a href="?page={{ logs.next_num }}&start_date={{ start_date }}&end_date={{ end_date }}" class="join-item btn">»</a>
                {% else %}
                <button class="join-item btn btn-disabled">»</button>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}